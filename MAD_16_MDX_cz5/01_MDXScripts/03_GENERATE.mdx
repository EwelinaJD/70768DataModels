
--------------------------------------------------------------------------------------------------------------------------------
--	GENERATE
--------------------------------------------------------------------------------------------------------------------------------

--	Applies a set to each member of another set, and then joins the resulting sets by union. 
--	Alternatively, this function returns a concatenated string created by evaluating a string expression over a set.


--	If a second set is specified, the Generate function returns a set generated by applying the tuples in the second set 
--	to each tuple in the first set, and then joining the resulting sets by union. 
--	If ALL is specified, the function retains duplicates in the resulting set.
--------------------------------------------------------------------------------------------------------------------------------

	SELECT 
	GENERATE(		[Date].[Calendar Year].[Calendar Year].MEMBERS
				,{(	[Date].[Calendar Year].CURRENTMEMBER,
					[Measures].[Internet Sales Amount]
					)}
				,ALL
				)
	ON 0
	FROM [Adventure Works]
	;

	SELECT 
	NON EMPTY GENERATE(		[Date].[Calendar Year].[Calendar Year].MEMBERS
						,{(	[Date].[Calendar Year].CURRENTMEMBER,
							[Measures].[Internet Sales Amount]
							)}
						,ALL
						)
	ON 0
	FROM [Adventure Works]
	;

	SELECT 
	GENERATE(		[Date].[Calendar Year].[Calendar Year].MEMBERS
				,	{[Measures].[Internet Sales Amount]}
				,	ALL
				)
	ON 0
	FROM [Adventure Works]
	;

	SELECT 
	GENERATE(		[Date].[Calendar Year].[Calendar Year].MEMBERS
				,	{[Measures].[Internet Sales Amount]}
				)
	ON 0
	FROM [Adventure Works]
	;

----------------------------------------------------------------

	SELECT 
	GENERATE(	[Date].[Calendar Year].[Calendar Year].MEMBERS
			 ,	TOPCOUNT(	[Date].[Calendar Year].CURRENTMEMBER	*	
							[Product].[Product].[Product].MEMBERS
						,	3
						,	[Measures].[Internet Sales Amount]
						)
				)
	ON 0
	FROM [Adventure Works]
	;

	SELECT 
	[Measures].[Internet Sales Amount]	ON 0,
	NON EMPTY GENERATE(		[Date].[Calendar Year].[Calendar Year].MEMBERS
						,	TOPCOUNT(	[Date].[Calendar Year].CURRENTMEMBER	*	
										[Product].[Product].[Product].MEMBERS
									,	3
									,	[Measures].[Internet Sales Amount]
									)
							)
	ON 1
	FROM [Adventure Works]
	;


----------------------------------------------------------------

	SELECT 
	[Measures].[Internet Sales Amount] on 0,
	NON EMPTY GENERATE(		[Date].[Calendar].[Month].MEMBERS
						,	{CLOSINGPERIOD([Date].[Calendar].[Date],[Date].[Calendar].CurrentMember)}
						)  ON 1
	FROM [Adventure Works]
	;

	SELECT 
	[Measures].[Internet Sales Amount] on 0,
	NON EMPTY GENERATE(		[Date].[Calendar Year].[Calendar Year].MEMBERS
						,	[Date].[Calendar].CURRENTMEMBER.FIRSTCHILD.FIRSTCHILD
						,	ALL
						)  ON 1
	FROM [Adventure Works]
	;


--	If a string expression is specified, the Generate function returns a string generated by evaluating the 
--	specified string expression against each tuple in the first set, and then concatenating the results. 
--	Optionally, the string can be delimited, separating each result in the resulting concatenated string.
--------------------------------------------------------------------------------------------------------------------------------

	WITH MEMBER [Measures].[GenSet] 
	AS
	GENERATE(	[Sales Reason].[Sales Reasons].Members 
			,	MEMBERTOSTR([Sales Reason].[Sales Reasons].CurrentMember)
			,	", "
			) 
	SELECT	{[Measures].[GenSet]} ON 0
	FROM	[Adventure Works]
	;

----------------------------------------------------------------------------------

	WITH   
	MEMBER [Measures].[GenerateString1] 
	AS  
		GENERATE(	[Date].[Calendar].CURRENTMEMBER.CHILDREN,  
					[Date].[Calendar].CURRENTMEMBER.NAME,
					" --> "
					)   
	SELECT   
		{	[Measures].[GenerateString1] 
			}										ON 0
	,	[Date].[Calendar].[Calendar Year].MEMBERS	ON 1  
	FROM [Adventure Works]
	;

	WITH
	MEMBER [Measures].[GenerateString2] 
	AS  
		GENERATE(	[Date].[Calendar].CURRENTMEMBER.CHILDREN,  
					[Date].[Calendar].CURRENTMEMBER.NAME,
					" --> "
					)   
	SELECT   
		{	[Measures].[GenerateString2] 
			}										ON 0
	,	[Date].[Calendar].[Calendar Year].MEMBERS	ON 1  
	FROM [Adventure Works]
	;
	 
	WITH
	MEMBER [Measures].[GenerateString3] 
	AS  
		GENERATE(	DESCENDANTS(	[Date].[Calendar].CURRENTMEMBER
									,3
									)
					,	[Date].[Calendar].CURRENTMEMBER.NAME
					,	" > "
					)  
	SELECT   
		{	[Measures].[GenerateString3] 
			}										ON 0
	,	[Date].[Calendar].[Calendar Year].MEMBERS	ON 1  
	FROM [Adventure Works]
	;
